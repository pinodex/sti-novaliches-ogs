{% extends '/_layout/main-default.html' %}

{% form_theme form '/_layout/form-default.html' %}

{% set page_title = 'Edit department' %}

{% block content %}
    <div class="container">
        <h1>{{ page_title }}</h1>

        <div class="grid">
            <div class="column-4">
                <form method="post" action="{{ app.request.getRequestUri }}">
                    {{ form_widget(form) }}
                    
                    <button type="submit" class="success">Save <span class="icon-navigate_next"></span></button>
                    {% if current_user.getRole() == 'admin' %}
                        <a href="{{ path('dashboard.departments.delete', {id: department.id}) }}" class="button link" @click.prevent="modals.confirm = true">Delete Department</a>
                    {% endif %}
                </form>
            </div>
        </div>
    </div>

    <modal :show.sync="modals.confirm">
        <h3 slot="header">Confirm action</h3>
        
        <div slot="body">
            <p>Are you sure you want to delete this department?</p>
        </div>

        <div slot="footer">
            <form method="post" action="{{ path('dashboard.departments.delete', {id: department.id}) }}">
                <input type="hidden" name="_token" value="{{ csrf_token('departments.delete') }}" />
                    
                <button type="button" class="neutral" @click="modals.confirm = false">Cancel</button>
                <button type="submit" class="danger">Delete Department <span class="icon-navigate_next"></span></button>
            </form>
        </div>
    </modal>
{% endblock %}