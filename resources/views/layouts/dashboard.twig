{% extends '/layouts/main.twig' %}

{% set active_tab = 'dashboard' %}

{% block content %}
    <nav class="nav has-shadow is-fixed-top">
        <div class="container is-fluid">
            <div class="nav-left">
                <button class="nav-item toggle-menu-button" @click="toggleSideBar()">
                    <transition name="fade">
                        <i class="fa fa-bars" v-show="!ui.nav.sideBarActive"></i>
                    </transition>

                    <transition name="slide-fade" :duration="{ enter: 1000, leave: 0 }">
                        <i class="fa fa-chevron-left" v-show="ui.nav.sideBarActive"></i>
                    </transition>
                </button>

                <a href="{{ route('index') }}" class="nav-item has-logo">
                    <img src="/assets/img/logo-transparent.png" alt="Logo">
                    <span class="is-hidden-mobile">Student Portal</span>
                </a>
            </div>

            <div class="nav-right is-flex-mobile">
                <div class="nav-item is-tab">
                    <img class="avatar" src="{{ auth_user().picture['thumb'] }}" />
                    <span class="is-hidden-mobile">{{ auth_user().first_name }}</span>
                </div>

                <a href="{{ route('auth.logout', {}, false) }}" class="nav-item is-tab" title="Logout">
                    <span class="icon">
                        <i class="fa fa-sign-out" aria-hidden="true"></i>
                    </span>

                    <span class="is-hidden-mobile">Log out</span>
                </a>
            </div>
        </div>
    </nav>

    <div class="off-menu is-always-active" :class="{ active: ui.nav.sideBarActive }">
        <aside class="menu sidebar">
            {% for item in menu %}
                {% if item.header != null %}
                    <p class="menu-label">{{ item.header }}</p>
                {% endif %}

                <ul class="menu-list">
                    {% for listItem in item.list %}
                        <li{{ active_menu starts with listItem.identifier ? ' class="is-active"' : '' }} title="{{ listItem.name }}">
                            <a href="{{ route(listItem.route, {}, false) }}">
                                <span class="icon"><i class="fa fa-{{ listItem.icon }}" aria-hidden="true"></i></span>
                                <span class="text">{{ listItem.name }}</span>
                            </a>
                        </li>    
                    {% endfor %}
                </ul>
            {% endfor %}
        </aside>

        <div class="main-container" @click="closeOverlays()">
            {% if session_get('message') %}
                <div class="notification is-{{ session_get('message')[0] }} is-main">
                    {{ session_get('message')[1] }}
                </div>
            {% endif %}
            
            {% block subcontent %}{% endblock %}
        </div>
    </div>
{% endblock %}
